@startuml

hide footbox
Participant ThemeManger as TM
Participant TMListHandler as TML
Participant ObjectLoader as OL
Participant TMButtonHandler as TMB

== Initialization ==
[-> TM ++  #D7983C : <<**UnityEvent**>>\nOnEnable()
TM -> TML ++ #D7983C : Instantiate
activate OL #D7983C
TML -> OL ++ #E2B16A : LoadScriptableObject()
return DefaultTheme
TM -> TMB ++ #D7983C: Instantiate
TM -> TML : GetThemeInfoList()
TML -> TML ++ #E2B16A : GetAllAceUsers()
return ExistingScripts
TML -> OL ++ #E2B16A : GetAssetsByType()
return ExistingThemes
deactivate OL
TML -> TML : PurgeDeletedScripts()
TML -> TML : AddNewScripts()
TM <- TML : <<**Event**>> \nUIStateUpdatedNotify()
[<- TM : <<**Event**>> \nUIStateUpdatedNotify()

== Draw UI ==

[-> TM : <<**AceScriptableObjectRoot**>>\nGetElementList()
TM -> TM ++ #E2B16A : GetScriptAndThemeDropdown()
TM -> TML ++ #E2B16A : GetThemesList().Count
return Count
TM -> TMB ++ #E2B16A : GetButtons()
return Element[]
deactivate TMB
[<-- TM : Element[]
deactivate TM

== Callbacks ==

[-> TM ++ #E2B36A : <<**Button Callback**>> \nScriptDropdownUpdated()
[<- TM : <<**Event**>> \nDataUpdateRequiredNotify()
TM -> TM ++ #F8D79F : GetSelectedScriptsThemeIndex()
TM -> TML ++ #E2B36A : GetThemesList()
TM -> TM : GetSelectScript().theme
return Index of Selected Script
return Set Selected Script to Index
[<- TM : <<**Event**>> \nUIStateUpdatedNotify()
deactivate TM



[-> TM ++ #E2B36A : <<**Button Callback**>> \nThemeDropdownUpdated()
[<- TM : <<**Event**>> \nDataUpdateRequiredNotify()
TM -> TM ++ #F8D79F : GetSelectScript()
return ScriptThemeInfo for Selected Script
TM -> TML ++ #E2B36A : GetThemeForIndex()
return Theme for Index
deactivate TML
[<- TM : <<**Event**>> \nThemeAssignmentChangedNotify()
[<- TM : <<**Event**>> \nUIStateUpdatedNotify()
deactivate TM



@enduml